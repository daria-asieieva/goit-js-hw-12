{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46845751-23df18a8b1d1a4c3ff293bf75';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => `\n    <li class=\"gallery__item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"/>\n        <div class=\"gallery__info\">\n          <p><b>Лайки:</b> ${image.likes}</p>\n          <p><b>Перегляди:</b> ${image.views}</p>\n          <p><b>Коментарі:</b> ${image.comments}</p>\n          <p><b>Завантаження:</b> ${image.downloads}</p>\n        </div>\n      </a>\n    </li>\n  `).join('');\n\n  \n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function toggleLoader(show) {\n  const loader = document.getElementById('loader');\n  if (loader) {\n    loader.style.display = show ? 'block' : 'none';\n  }\n}\n\nexport function showNotification(message) {\n  iziToast.info({\n    title: '',\n    message: message,\n    position: 'topRight',\n    timeout: 3000\n  });\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    const form = document.querySelector('.form');\n    const loadMoreButton = document.querySelector('.load-more');\n    const loaderElement = document.getElementById('loader');\n    const gallery = new SimpleLightbox('.gallery a');\n\n    let currentPage = 1;\n    let currentQuery = '';\n    const perPage = 15;\n\n    const hideLoadMoreButton = () => (loadMoreButton.style.display = 'none');\n    const showLoadMoreButton = () => (loadMoreButton.style.display = 'block');\n\n    const toggleLoader = (show) => {\n        loaderElement.style.display = show ? 'block' : 'none';\n    };\n\n    const showNotification = (message) => {\n        iziToast.info({\n            title: '',\n            message: message,\n            position: 'topRight',\n            timeout: 3000\n        });\n    };\n\n    form.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        currentQuery = event.currentTarget.elements.searchQuery.value.trim();\n\n        if (currentQuery === '') {\n            showNotification('Будь ласка, введіть пошуковий запит');\n            return;\n        }\n\n        clearGallery();\n        toggleLoader(true);\n        hideLoadMoreButton();\n        currentPage = 1;\n\n        try {\n            const data = await fetchImages(currentQuery, currentPage, perPage);\n            if (!data.hits || data.hits.length === 0) {\n\n                showNotification('На жаль, немає зображень, що відповідають вашому пошуковому запиту. Спробуйте ще раз!');\n            } else {\n                renderImages(data.hits);\n                gallery.refresh();\n                if (data.totalHits > perPage) {\n                    showLoadMoreButton();\n                }\n\n\n                showNotification(`Ура! Ми знайшли ${data.totalHits} зображень.`);\n            }\n        } catch (error) {\n            showNotification('Сталася помилка під час отримання зображень. Спробуйте пізніше.');\n        } finally {\n            toggleLoader(false);\n        }\n    });\n\n    loadMoreButton.addEventListener('click', async () => {\n        currentPage += 1;\n        toggleLoader(true);\n        hideLoadMoreButton();\n\n        try {\n            const data = await fetchImages(currentQuery, currentPage, perPage);\n            if (data.hits && data.hits.length > 0) {\n                renderImages(data.hits);\n                gallery.refresh();\n\n                const totalFetched = currentPage * perPage;\n                if (totalFetched >= data.totalHits) {\n                    showNotification(\"Вибачте, але ви досягли кінця результатів пошуку.\");\n                } else {\n                    showLoadMoreButton();\n\n\n                    const { height: cardHeight } = document\n                        .querySelector('.gallery')\n                        .firstElementChild.getBoundingClientRect();\n\n                    window.scrollBy({\n                        top: cardHeight * 2,\n                        behavior: 'smooth',\n                    });\n                }\n            } else {\n                showNotification(\"Вибачте, але ви досягли кінця результатів пошуку.\");\n            }\n        } catch (error) {\n            showNotification('Сталася помилка під час завантаження додаткових зображень. Спробуйте ще раз.');\n        } finally {\n            toggleLoader(false);\n        }\n    });\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderImages","images","gallery","markup","image","clearGallery","form","loadMoreButton","loaderElement","SimpleLightbox","currentPage","currentQuery","hideLoadMoreButton","showLoadMoreButton","toggleLoader","show","showNotification","message","iziToast","event","data","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCpBO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,iBAEpBA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,6BAE7BA,EAAM,KAAK;AAAA,iCACPA,EAAM,KAAK;AAAA,iCACXA,EAAM,QAAQ;AAAA,oCACXA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAIhD,EAAE,KAAK,EAAE,EAGVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAEO,SAASE,GAAe,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,CClBA,SAAS,iBAAiB,mBAAoB,IAAM,CAEhD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAgB,SAAS,eAAe,QAAQ,EAChDN,EAAU,IAAIO,EAAe,YAAY,EAE/C,IAAIC,EAAc,EACdC,EAAe,GACnB,MAAMd,EAAU,GAEVe,EAAqB,IAAOL,EAAe,MAAM,QAAU,OAC3DM,EAAqB,IAAON,EAAe,MAAM,QAAU,QAE3DO,EAAgBC,GAAS,CAC3BP,EAAc,MAAM,QAAUO,EAAO,QAAU,MACvD,EAEUC,EAAoBC,GAAY,CAClCC,EAAS,KAAK,CACV,MAAO,GACP,QAASD,EACT,SAAU,WACV,QAAS,GACrB,CAAS,CACT,EAEIX,EAAK,iBAAiB,SAAU,MAAOa,GAAU,CAI7C,GAHAA,EAAM,eAAc,EACpBR,EAAeQ,EAAM,cAAc,SAAS,YAAY,MAAM,OAE1DR,IAAiB,GAAI,CACrBK,EAAiB,qCAAqC,EACtD,MACH,CAEDX,IACAS,EAAa,EAAI,EACjBF,IACAF,EAAc,EAEd,GAAI,CACA,MAAMU,EAAO,MAAM1B,EAAYiB,EAAcD,EAAab,CAAO,EAC7D,CAACuB,EAAK,MAAQA,EAAK,KAAK,SAAW,EAEnCJ,EAAiB,uFAAuF,GAExGhB,EAAaoB,EAAK,IAAI,EACtBlB,EAAQ,QAAO,EACXkB,EAAK,UAAYvB,GACjBgB,IAIJG,EAAiB,mBAAmBI,EAAK,SAAS,aAAa,EAEtE,MAAe,CACZJ,EAAiB,iEAAiE,CAC9F,QAAkB,CACNF,EAAa,EAAK,CACrB,CACT,CAAK,EAEDP,EAAe,iBAAiB,QAAS,SAAY,CACjDG,GAAe,EACfI,EAAa,EAAI,EACjBF,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAM1B,EAAYiB,EAAcD,EAAab,CAAO,EACjE,GAAIuB,EAAK,MAAQA,EAAK,KAAK,OAAS,EAKhC,GAJApB,EAAaoB,EAAK,IAAI,EACtBlB,EAAQ,QAAO,EAEMQ,EAAcb,GACfuB,EAAK,UACrBJ,EAAiB,mDAAmD,MACjE,CACHH,IAGA,KAAM,CAAE,OAAQQ,CAAU,EAAK,SAC1B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE5C,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClC,CAAqB,CACJ,MAEDL,EAAiB,mDAAmD,CAE3E,MAAe,CACZA,EAAiB,8EAA8E,CAC3G,QAAkB,CACNF,EAAa,EAAK,CACrB,CACT,CAAK,CACL,CAAC"}