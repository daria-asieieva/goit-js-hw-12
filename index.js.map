{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46845751-23df18a8b1d1a4c3ff293bf75';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}`;\n  try {\n    const response = await axios.get(url, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage\n      }\n    });\n    \n    if (response.data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n    \n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    if (!gallery) return;  \n    \n    gallery.innerHTML = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery__link\">\n            <div class=\"gallery__item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                <div class=\"gallery__info\">\n                    <p><b>Likes:</b> ${image.likes}</p>\n                    <p><b>Views:</b> ${image.views}</p>\n                    <p><b>Comments:</b> ${image.comments}</p>\n                    <p><b>Downloads:</b> ${image.downloads}</p>\n                </div>\n            </div>\n        </a>\n    `).join('');\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    if (gallery) gallery.innerHTML = '';\n}\n\n\nexport function showNotification(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight'\n    });\n}\n\n\nexport function toggleLoader(show) {\n    const loader = document.querySelector('.loader');\n    if (loader) loader.style.display = show ? 'block' : 'none';\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery, showNotification, toggleLoader } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const form = document.querySelector('.search-form');\n    const loadMoreButton = document.querySelector('.load-more');\n    const gallery = new SimpleLightbox('.gallery a');\n\n    let currentPage = 1;\n    let currentQuery = '';\n    const perPage = 15;\n\n    const hideLoadMoreButton = () => (loadMoreButton.style.display = 'none');\n    const showLoadMoreButton = () => (loadMoreButton.style.display = 'block');\n\n    form.addEventListener('submit', async (event) => {\n        event.preventDefault();\n        currentQuery = event.currentTarget.elements.searchQuery.value.trim();\n\n        if (currentQuery === '') {\n            showNotification('Please enter a search query');\n            return;\n        }\n\n        clearGallery();\n        toggleLoader(true);\n        hideLoadMoreButton();\n        currentPage = 1;\n\n        try {\n            const data = await fetchImages(currentQuery, currentPage, perPage);\n            if (!data.hits || data.hits.length === 0) {\n                showNotification('Sorry, there are no images matching your search query. Please try again!');\n            } else {\n                renderImages(data.hits);\n                gallery.refresh();\n                if (data.totalHits > perPage) {\n                    showLoadMoreButton();\n                }\n            }\n        } catch (error) {\n            const errorMessage = error.response\n                ? 'An error occurred while fetching images. Please check your connection and try again.'\n                : 'An error occurred while fetching images. Please try again later.';\n            showNotification(errorMessage);\n        } finally {\n            toggleLoader(false);\n        }\n    });\n\n    loadMoreButton.addEventListener('click', async () => {\n        currentPage += 1;\n        toggleLoader(true);\n        hideLoadMoreButton();\n\n        try {\n            const data = await fetchImages(currentQuery, currentPage, perPage);\n            if (data.hits && data.hits.length > 0) {\n                appendImages(data.hits);\n                gallery.refresh();\n\n                const totalFetched = currentPage * perPage;\n                if (totalFetched >= data.totalHits) {\n                    showNotification(\"We're sorry, but you've reached the end of search results.\");\n                } else {\n                    showLoadMoreButton();\n                    window.scrollBy({\n                        top: document.querySelector('.gallery').lastElementChild.getBoundingClientRect().height * 2,\n                        behavior: 'smooth'\n                    });\n                }\n            } else {\n                showNotification(\"We're sorry, but you've reached the end of search results.\");\n            }\n        } catch (error) {\n            showNotification('An error occurred while loading more images. Please try again.');\n        } finally {\n            toggleLoader(false);\n        }\n    });\n});\n\nfunction appendImages(images) {\n    const gallery = document.querySelector('.gallery');\n    if (!gallery) return;\n\n    gallery.insertAdjacentHTML(\n        'beforeend',\n        images.map(image => `\n            <a href=\"${image.largeImageURL}\" class=\"gallery__link\">\n                <div class=\"gallery__item\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                    <div class=\"gallery__info\">\n                        <p><b>Likes:</b> ${image.likes}</p>\n                        <p><b>Views:</b> ${image.views}</p>\n                        <p><b>Comments:</b> ${image.comments}</p>\n                        <p><b>Downloads:</b> ${image.downloads}</p>\n                    </div>\n                </div>\n            </a>\n        `).join('')\n    );\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","axios","error","renderImages","images","gallery","image","clearGallery","showNotification","message","iziToast","toggleLoader","show","loader","form","loadMoreButton","SimpleLightbox","currentPage","currentQuery","hideLoadMoreButton","showLoadMoreButton","event","data","errorMessage","appendImages"],"mappings":"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"}